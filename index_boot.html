<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bootstrap-Test</title>
	
	<!-- App -->
    <link href="css/app.css" rel="stylesheet">
	
    <!-- Bootstrap -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
	
	<!-- Mapbox -->
	<script src='https://api.tiles.mapbox.com/mapbox.js/v1.6.1/mapbox.js'></script>
	<link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.1/mapbox.css' rel='stylesheet' />

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
	<!-- Daten einladen-->
	<script src='data/msgPoints.js'></script>
	<script src='data/msgLines.js'></script>
  
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="js/bootstrap.min.js"></script>
	
	<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
	  <div class="container-fluid">
		<!-- Brand and toggle get grouped for better mobile display -->
		<div class="navbar-header">
		  <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
			<span class="sr-only">Toggle navigation</span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
			<span class="icon-bar"></span>
		  </button>
		  <a class="navbar-brand" href="#">SmartEnergyMap</a>
		</div>

		<!-- Collect the nav links, forms, and other content for toggling -->
		<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
		  <ul class="nav navbar-nav">
			<li class="active"><a href="#">Map</a></li>
			<li><a href="#">About</a></li>
			<!-- 
			<li class="dropdown">
			  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <span class="caret"></span></a>
			  <ul class="dropdown-menu" role="menu">
				<li><a href="#">Action</a></li>
				<li><a href="#">Another action</a></li>
				<li><a href="#">Something else here</a></li>
				<li class="divider"></li>
				<li><a href="#">Separated link</a></li>
				<li class="divider"></li>
				<li><a href="#">One more separated link</a></li>
			  </ul>
			</li>
		  </ul>
		  <form class="navbar-form navbar-left" role="search">
			<div class="form-group">
			  <input type="text" class="form-control" placeholder="Search">
			</div>
			<button type="submit" class="btn btn-default">Submit</button>
		  </form>
		  <ul class="nav navbar-nav navbar-right">
			<li><a href="#">Link</a></li>
			<li class="dropdown">
			  <a href="#" class="dropdown-toggle" data-toggle="dropdown">Dropdown <span class="caret"></span></a>
			  <ul class="dropdown-menu" role="menu">
				<li><a href="#">Action</a></li>
				<li><a href="#">Another action</a></li>
				<li><a href="#">Something else here</a></li>
				<li class="divider"></li>
				<li><a href="#">Separated link</a></li>
				<span class="glyphicon glyphicon-info-sign"></span>
			  </ul>
			</li>
		  </ul>
		</div><!-- /.navbar-collapse -->
	  </div><!-- /.container-fluid -->
	</nav>
	<!-- The Map -->
	<div id="map">
		<script>
		//### Inizialisierung der Karte ###
		var map = L.mapbox.map('map')
					.setView([52.481707, 13.356576], 17);
		//### Hintergrundkarten definieren ###
		var coolMap = L.mapbox.tileLayer('examples.map-51f69fea').addTo(map);
		
		//### Punkte und Linien einbinden ###
		var msgPoints = msgPoints; //schreibt js-Inhalt in Variable

		//Punkte hinzufügen --> alte Punkte
		//map.featureLayer.setGeoJSON(msgPoints); // add points with style

		//Popup hinzufügen --> vertragt sich nicht mit dem style und überlagert sich daher mit den bereits eingefügten Punkten
		/*
		var myLayer = L.geoJson(msgPoints, {
			// style: function (feature) {
			//     return feature.properties.style;
			// },
			 onEachFeature: function (feature, layer) {
				 layer.bindPopup(feature.properties.type + '</br>' + 
									'Energiewert: ' + feature.properties.value);
			 }
		 });

		 
		//myLayer.addData(msgPoints);
		myLayer.addTo(map);
		*/
		
		//### hinzufügen von individuellen Markern ###
		// dafür sollte eine Funktion erstellt werden!
			var LeafIcon = L.Icon.extend({
				options: {
					//shadowUrl: '../docs/images/leaf-shadow.png',
					iconSize:     [70, 70],
					//shadowSize:   [50, 64],
					//iconAnchor:   [22, 94],
					//shadowAnchor: [4, 62],
					popupAnchor:  [0, -10]
				}
			});

			var batterieIcon = new LeafIcon({iconUrl: 'img/battery_ebattery_w.png'}),
				windIcon = new LeafIcon({iconUrl: 'img/producer_wind_w.png'});
				chargingIcon = new LeafIcon({iconUrl: 'img/battery_ecar_w.png'});
				photoIcon = new LeafIcon({iconUrl: 'img/producer_solar_w.png'});

			L.marker([52.48243899971542, 13.35747111893229], {icon: batterieIcon}).bindPopup("<h4>I am a battery.</h4> <p> Capacity: 80% </p>").addTo(map);
			//L.marker([52.48243899971542, 13.35747111893229], {icon: batterieIcon}).bindPopup("I am a batterie. <div class="popup_batterie_div"></div>").addTo(map);
			L.marker([52.480688658255012 , 13.354568528677662], {icon: windIcon}).bindPopup("I am a wind wheel.").addTo(map);
			L.marker([52.480911923161734, 13.355110029627905], {icon: windIcon}).bindPopup("I am a wind wheel.").addTo(map);
			L.marker([52.481457 , 13.355791], {icon: windIcon}).bindPopup("I am a wind wheel.").addTo(map);
			L.marker([52.48159684369503, 13.355837930668985], {icon: windIcon}).bindPopup("I am a wind wheel.").addTo(map);
			L.marker([52.481227, 13.356873], {icon: windIcon}).bindPopup("I am a wind wheel.").addTo(map);
			L.marker([52.481662, 13.357115], {icon: windIcon}).bindPopup("I am a wind wheel.").addTo(map);
			//L.marker([52.48167184015486, 13.357115010925135], {icon: windIcon}).bindPopup("I am a wind wheel.").addTo(map);
			//L.marker([52.481797374733404, 13.356779623859563], {icon: chargingIcon}).bindPopup("I am a charging station.").addTo(map);
			//L.marker([52.482247714873587, 13.357158553524592], {icon: windIcon}).bindPopup("I am a wind wheel.").addTo(map);
			L.marker([52.482262, 13.357565], {icon: photoIcon}).bindPopup("I am a solar panel.").addTo(map);
			L.marker([52.482455631243511, 13.357434101623429], {icon: photoIcon}).bindPopup("I am a solar mover.").addTo(map);
			L.marker([52.481356, 13.355660], {icon: photoIcon}).bindPopup("I am a solar panel.").addTo(map);
			//L.marker([52.482455631243511, 13.357434101623429], {icon: photoIcon}).bindPopup("I am a solar panel.").addTo(map);
			//L.marker([52.482058471303993, 13.357288699302121], {icon: photoIcon}).bindPopup("I am a wind wheel.").addTo(map);
			//L.marker([51.495, -0.083], {icon: redIcon}).bindPopup("I am a red leaf.").addTo(map);
			//L.marker([51.49, -0.1], {icon: orangeIcon}).bindPopup("I am an orange leaf.").addTo(map);
			//var batteriediv = document.getElementsByClassName( 'popup_batterie_div' )[0];
			//batteriediv.innerHTML = 'I am the div';
		
		//### add Lines with Leaflet-Funktion
		//Linien befinden sich später in der D3-Ebene
		var lines = msgLines;
		
		var myStyle = {
			"color": "#0099CC",
			"weight": 3,
			"opacity": 0.65
		};
		L.geoJson(lines, {style: myStyle}).addTo(map);
		
		</script>
	</div>
	<!-- Animationsknopf hinzufügen-->
	<div><img id="animationButton" src="img/animationButton.png"></div>
	<!-- Animationsknopf hinzufügen-->
	<div><img id="logo" src="img/logo2.png"></div>
  </body>
</html>