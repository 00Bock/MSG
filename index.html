<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>MSG-Zero</title>

<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />
<script src='https://api.tiles.mapbox.com/mapbox.js/v1.6.1/mapbox.js'></script>
<link href='https://api.tiles.mapbox.com/mapbox.js/v1.6.1/mapbox.css' rel='stylesheet' />

<!-- <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.7.2/leaflet.css" /> -->

<script src='msg_points_wgs84.js'></script>
<!--<script src='travelLines.js'></script> Anpassen!-->

<style>
  body { margin:0; padding:0; }
  #map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
<body>

<style>
  body { margin:0; padding:0; }
  #map { position:absolute; top:0; bottom:0; width:100%; }
</style>
</head>
<body>

<style>
  #info {
    background:rgba(255,255,255,0.5);
    position:absolute;
    width:260px;
    top:10px;
    bottom:10px;
    right:10px;
    padding:20px;
    border-radius:2px;
    }
</style>

<div id='map'></div>
<div id='info'></div>

<script>
var map = L.mapbox.map('map') 
    .setView([52.481707, 13.356576], 17);
	
/*### Hintergrundkarten definieren ###*/

var coolMap = L.mapbox.tileLayer('examples.map-51f69fea'); //Hintergrundkarten in Variable schieben
var sImage = L.mapbox.tileLayer('examples.map-b70jh5xu');
var mapnik = L.tileLayer('http://{s}.www.toolserver.org/tiles/bw-mapnik/{z}/{x}/{y}.png', {attribution: 'Mapnik'}).addTo(map);

//Baselayer in eine Variable schieben
var baseLayers = {
"easy peasy map": coolMap,
"satellite image": sImage,
"mapnik": mapnik
};

//Baselayer-Auswahl hinzufügen ("Basemaps", "Overlays", "Properties")
new L.control.layers(baseLayers, null, {position: 'topleft'}).addTo(map); 
//Maßstab hinzufügen
new L.control.scale().addTo(map);

/* ### Ausprägung der Linien anhand eines Attributs ### */
var msgPoints_style = {
    style: function(feature) {
        switch (feature.properties.Bezeichnun) {
				case 'Windkraftanlage': return {color: "#000000"}; break;
				case 'Windmessanlage': return {color: "#DF7401"}; break;
				default: return {color: "#00ff00"};
        }
    }
};

/*### Punkte und Linien einbinden ###*/
var msgPoints = msg_points_wgs84; //schreibt js-Inhalt in Variable
// var tLines = travelLines; //Anpassen!

map.featureLayer.setGeoJSON(msgPoints, msgPoints_style); // add points with style

/* ### Info hinzufügen ### */
// Listen for individual marker clicks
map.markerLayer.on('click',function(e) {
    var feature = e.layer.feature;
    var info = '<h2>' + feature.properties.Bezeichnun + '</h2>' +
			   '<p>' + feature.properties.Beschreibu + '</p>';

    document.getElementById('info').innerHTML = info;
});

// Clear the tooltip when map is clicked
map.on('click',function(e){
    document.getElementById('info').innerHTML = '';
});

</script>

</body>
</html>

